{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/db.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\"\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined\n}\n\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient({\n  log: process.env.NODE_ENV === \"development\" ? [\"query\", \"error\", \"warn\"] : [\"error\"],\n})\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,6IAAY,CAAC;IAC/D,KAAK,uCAAyC;QAAC;QAAS;QAAS;KAAO,GAAG;AAC7E;AAEA,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui-pro/modern-profile-card.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ModernProfileCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call ModernProfileCard() from the server but ModernProfileCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui-pro/modern-profile-card.tsx <module evaluation>\",\n    \"ModernProfileCard\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,oBAAoB,IAAA,wQAAuB,EACpD;IAAa,MAAM,IAAI,MAAM;AAAkP,GAC/Q,2EACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui-pro/modern-profile-card.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ModernProfileCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call ModernProfileCard() from the server but ModernProfileCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui-pro/modern-profile-card.tsx\",\n    \"ModernProfileCard\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,oBAAoB,IAAA,wQAAuB,EACpD;IAAa,MAAM,IAAI,MAAM;AAAkP,GAC/Q,uDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui-pro/share-profile-button.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ShareProfileButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call ShareProfileButton() from the server but ShareProfileButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui-pro/share-profile-button.tsx <module evaluation>\",\n    \"ShareProfileButton\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,qBAAqB,IAAA,wQAAuB,EACrD;IAAa,MAAM,IAAI,MAAM;AAAoP,GACjR,4EACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui-pro/share-profile-button.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ShareProfileButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call ShareProfileButton() from the server but ShareProfileButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui-pro/share-profile-button.tsx\",\n    \"ShareProfileButton\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,qBAAqB,IAAA,wQAAuB,EACrD;IAAa,MAAM,IAAI,MAAM;AAAoP,GACjR,wDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui-pro/scroll-to-top.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ScrollToTop = registerClientReference(\n    function() { throw new Error(\"Attempted to call ScrollToTop() from the server but ScrollToTop is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui-pro/scroll-to-top.tsx <module evaluation>\",\n    \"ScrollToTop\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,qEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui-pro/scroll-to-top.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ScrollToTop = registerClientReference(\n    function() { throw new Error(\"Attempted to call ScrollToTop() from the server but ScrollToTop is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui-pro/scroll-to-top.tsx\",\n    \"ScrollToTop\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,iDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/analytics/view-tracker.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ViewTracker = registerClientReference(\n    function() { throw new Error(\"Attempted to call ViewTracker() from the server but ViewTracker is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/analytics/view-tracker.tsx <module evaluation>\",\n    \"ViewTracker\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,uEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/analytics/view-tracker.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ViewTracker = registerClientReference(\n    function() { throw new Error(\"Attempted to call ViewTracker() from the server but ViewTracker is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/analytics/view-tracker.tsx\",\n    \"ViewTracker\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,mDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/analytics/click-tracker.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ClickTracker = registerClientReference(\n    function() { throw new Error(\"Attempted to call ClickTracker() from the server but ClickTracker is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/analytics/click-tracker.tsx <module evaluation>\",\n    \"ClickTracker\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,eAAe,IAAA,wQAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,wEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/analytics/click-tracker.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ClickTracker = registerClientReference(\n    function() { throw new Error(\"Attempted to call ClickTracker() from the server but ClickTracker is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/analytics/click-tracker.tsx\",\n    \"ClickTracker\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,eAAe,IAAA,wQAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,oDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 212, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 220, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/%5Busername%5D/page.tsx"],"sourcesContent":["import { notFound } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport Image from \"next/image\"\nimport { ModernProfileCard } from \"@/components/ui-pro/modern-profile-card\"\nimport { ShareProfileButton } from \"@/components/ui-pro/share-profile-button\"\nimport { ScrollToTop } from \"@/components/ui-pro/scroll-to-top\"\nimport { ViewTracker } from \"@/components/analytics/view-tracker\"\nimport { ClickTracker } from \"@/components/analytics/click-tracker\"\n\ninterface Props {\n  params: Promise<{ username: string }>\n}\n\nexport async function generateMetadata({ params }: Props) {\n  const { username } = await params\n  const profile = await prisma.profile.findUnique({\n    where: { username },\n    select: { displayName: true, bio: true, avatarUrl: true }\n  })\n\n  if (!profile) return {}\n\n  return {\n    title: `${profile.displayName} | Athlink`,\n    description: profile.bio || `Profil de ${profile.displayName}`,\n    openGraph: {\n      images: profile.avatarUrl ? [profile.avatarUrl] : []\n    }\n  }\n}\n\nexport default async function ProfilePage({ params }: Props) {\n  const { username } = await params\n  const profile = await prisma.profile.findUnique({\n    where: { username },\n    include: {\n      links: { where: { isActive: true }, orderBy: { position: 'asc' } },\n      races: { \n        orderBy: { date: 'asc' }\n      },\n      sponsors: { orderBy: { position: 'asc' }, take: 4 },\n      media: { orderBy: { position: 'asc' }, take: 6 }\n    }\n  })\n\n  if (!profile || !profile.isPublic) {\n    notFound()\n  }\n\n  // Logique d'affichage du sport\n  let displaySport: string = profile.sport\n  \n  const stats = profile.stats as { originalSport?: string } | null\n  if (stats?.originalSport) {\n    displaySport = stats.originalSport\n  } else {\n    const enumSports = [\"RUNNING\", \"CYCLING\", \"TRIATHLON\", \"SWIMMING\", \"SKIING\", \"OTHER\"]\n    \n    if (enumSports.includes(profile.sport)) {\n      const sportLabels: Record<string, string> = {\n        RUNNING: \"Course à pied\",\n        CYCLING: \"Cyclisme\", \n        TRIATHLON: \"Triathlon\",\n        SWIMMING: \"Natation\",\n        SKIING: \"Ski\",\n        OTHER: \"Autre\"\n      }\n      displaySport = sportLabels[profile.sport] || profile.sport\n    } else {\n      displaySport = profile.sport\n    }\n  }\n\n  // Track view\n  try {\n    await prisma.analytics.create({\n      data: {\n        profileId: profile.id,\n        views: 1,\n        uniqueViews: 1,\n        linkClicks: 0,\n      }\n    })\n  } catch (error) {\n    console.error(\"Analytics tracking error:\", error)\n  }\n\n\n  return (\n    <>\n      {/* Analytics Tracking */}\n      <ViewTracker profileId={profile.id} />\n      \n      {/* Floating Buttons */}\n      <ShareProfileButton username={username} displayName={profile.displayName} />\n      <ScrollToTop />\n\n      {/* Modern Profile Card Layout avec Click Tracking */}\n      <ClickTracker profileId={profile.id}>\n        <div className=\"min-h-screen relative overflow-hidden flex items-center justify-center py-8 px-4\">\n        \n        {/* Image de fond floutée - Photo de profil agrandie */}\n        <div className=\"absolute inset-0 overflow-hidden\">\n          {profile.avatarUrl ? (\n            <>\n              <Image\n                src={profile.avatarUrl}\n                alt=\"Background\"\n                fill\n                className=\"object-cover scale-110\"\n                style={{ filter: 'blur(80px)' }}\n                priority\n              />\n              {/* Overlay sombre pour contraste */}\n              <div className=\"absolute inset-0 bg-black/60\" />\n            </>\n          ) : (\n            <div className=\"absolute inset-0 bg-gradient-to-br from-gray-900 via-black to-gray-900\" />\n          )}\n        </div>\n\n        {/* Carte de profil centrale */}\n        <div className=\"relative z-10 w-full\">\n          <ModernProfileCard\n            displayName={profile.displayName}\n            bio={profile.bio}\n            location={profile.location}\n            avatarUrl={profile.avatarUrl}\n            sport={displaySport}\n            instagram={profile.instagram}\n            strava={profile.strava}\n            youtube={profile.youtube}\n            tiktok={profile.tiktok}\n            plan={profile.plan as \"FREE\" | \"PRO\" | \"ELITE\"}\n            links={profile.links}\n            races={profile.races}\n            sponsors={profile.sponsors}\n            media={profile.media}\n            username={username}\n            hasCoachingServices={profile.plan === \"COACH\" || profile.plan === \"ELITE\"}\n          />\n        </div>\n        </div>\n      </ClickTracker>\n    </>\n  )\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}